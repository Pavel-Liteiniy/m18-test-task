"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NAME_REG_EXP=/^[-a-zA-Zа-яёА-ЯЁ\s]+$/,EMAIL_REG_EXP=/^(?:[-a-z\d\+\*\/\?!{}`~_%&`=^$#]+(?:\.[-a-z\d\+\*\/\?!{}`~_%&`=^$#]+)*)@(?:[-a-z\d_]+\.){1,60}[a-z]{2,6}$/,PHONE_REG_EXP=/^(\+7|7|8)*[-\s]*[(]{0,1}[0-9]{3}[)]{0,1}[-\s]*[0-9]{3}[-\s]*[0-9]{2}[-\s]*[0-9]{2}$/,URL="https://jsonplaceholder.typicode.com/posts",SHOW_TIME=5e3,ErrorDescription={DEFAULT:"Данные указаны некорректно",NAME:"Поле может содержать буквы, символы тире и пробел",EMAIL:"Укажите адрес электронной почты в формате: pasha96@email.com",PHONE:"Это не похоже на номер телефона",SUBMIT:"При отправке данных произошла ошибка. Попробуйте отправить еще раз либо обновите страницу."},innerElement=document.querySelector(".subscribe__inner"),formElement=innerElement.querySelector(".subscribe__form"),inputNameElement=formElement.querySelector("#subscribe-name"),inputEmailElement=formElement.querySelector("#subscribe-email"),inputPhoneElement=formElement.querySelector("#subscribe-phone"),buttonElement=formElement.querySelector(".subscribe__button"),toast=function(e){var t=document.createElement("div");t.textContent=e,t.classList.add("toast__item"),toastContainer.append(t),setTimeout(function(){t.remove()},SHOW_TIME)},renderValidationHint=function(e,t){var n=t.isInvalid,r=t.description,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"afterend";if(n||!e.nextElementSibling.classList.contains("subscribe__validation-hint"))return n&&e.nextElementSibling.classList.contains("subscribe__validation-hint")?(e.nextElementSibling.remove(),void e.insertAdjacentHTML(t,'<p class="subscribe__validation-hint">'.concat(r,"</p>"))):void(n&&!e.nextElementSibling.classList.contains("subscribe__validation-hint")&&e.insertAdjacentHTML(t,'<p class="subscribe__validation-hint">'.concat(r,"</p>")));e.nextElementSibling.remove()},checkValidity=function(e,t){var n=e.value,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ErrorDescription.DEFAULT,e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return 0===n.length&&e?{isInvalid:!0,description:"Поле обязательно для заполнения"}:0===n.length&&!e||t.test(n)?{isInvalid:!1,description:"Валидно"}:{isInvalid:!0,description:r}},setElementValidityMarker=function(e,t){t.isInvalid?e.classList.add("subscribe__input--invalid"):e.classList.remove("subscribe__input--invalid")},inputValidationHandler=function(e,t,n){e=e.target,n=checkValidity(e,t,n,!(3<arguments.length&&void 0!==arguments[3])||arguments[3]);setElementValidityMarker(e,n),renderValidationHint(e,n)};innerElement.style.minHeight=innerElement.offsetHeight+"px",formElement.setAttribute("novalidate",!0);var toastContainer=document.createElement("div");toastContainer.classList.add("toast"),document.body.append(toastContainer),inputNameElement.addEventListener("input",function(e){inputValidationHandler(e,NAME_REG_EXP,ErrorDescription.NAME),e.target.value=e.target.value.replace(/[^-a-zA-Zа-яёА-ЯЁ\s]/,"")}),inputEmailElement.addEventListener("input",function(e){inputValidationHandler(e,EMAIL_REG_EXP,ErrorDescription.EMAIL)}),inputPhoneElement.addEventListener("input",function(e){inputValidationHandler(e,PHONE_REG_EXP,ErrorDescription.PHONE,!1)}),formElement.addEventListener("submit",function(e){e.preventDefault();var t=checkValidity(inputNameElement,NAME_REG_EXP,ErrorDescription.NAME),n=checkValidity(inputEmailElement,EMAIL_REG_EXP,ErrorDescription.EMAIL);if(t.isInvalid&&(setElementValidityMarker(inputNameElement,t),renderValidationHint(inputNameElement,t)),n.isInvalid&&(setElementValidityMarker(inputEmailElement,n),renderValidationHint(inputEmailElement,n)),!t.isInvalid&&!n.isInvalid){var r={},i=_createForOfIteratorHelper(new FormData(e.target).entries());try{for(i.s();!(a=i.n()).done;){var a=a.value;r[a[0]]=_toConsumableArray(a).pop()}}catch(e){i.e(e)}finally{i.f()}inputNameElement.disabled=!0,inputEmailElement.disabled=!0,inputPhoneElement.disabled=!0,buttonElement.disabled=!0;var o=buttonElement.textContent;buttonElement.textContent="Сейчас подпишем...",fetch(URL,{method:"POST",body:JSON.stringify(r),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(){innerElement.innerHTML='<p class="subscribe__success">Спасибо! Мы будем держать вас в курсе обновлений</p>'}).catch(function(){toast(ErrorDescription.SUBMIT),inputNameElement.disabled=!1,inputEmailElement.disabled=!1,inputPhoneElement.disabled=!1,buttonElement.disabled=!1,buttonElement.textContent=o})}});
"use strict";var Id={SUBSCRIBE:"#subscribe"},linkElements=document.querySelectorAll("a[data-scroll]"),inputNameElement=document.querySelector("#subscribe-name"),clickLinkHandler=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href"),e=document.querySelector(t);void 0!==e&&(e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),t===Id.SUBSCRIBE&&setTimeout(function(){return inputNameElement.focus()},1e3))};linkElements.forEach(function(e){e.addEventListener("click",clickLinkHandler)});
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var data=[{description:"Оранжерея в&nbsp;стиле джунглей для&nbsp;любителей цветочков",src:{x1:"/img/slider-1@1x.jpg",x2:"/img/slider-1@2x.jpg"},size:{width:750,height:500}},{description:"Кафельная плитка в&nbsp;ванной комнате в&nbsp;скандинавском стиле",src:{x1:"/img/slider-2@1x.jpg",x2:"/img/slider-2@2x.jpg"},size:{width:750,height:500}},{description:"Рай воплоти для&nbsp;любителей Икеи и бирюзовых тонов",src:{x1:"/img/slider-3@1x.jpg",x2:"/img/slider-3@2x.jpg"},size:{width:750,height:500}}],RenderPosition={AFTERBEGIN:"afterbegin",BEFOREEND:"beforeend"},SwitchSlideDirection={FORWARD:"next",BACKWARD:"previous"},container=document.querySelector(".slider__wrapper"),selectedSlideNumber=1,createElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild||""},createSlide=function(t,e){var i=t.description,n=t.src,r=t.size,l=/\.\w+$/i,t=".webp";return'<li class="slider__item'.concat(e===selectedSlideNumber?" slider__item--current":"",'">\n\t\t\t\t\t\t<p class="slider__description">').concat(i,'</p>\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<source\n\t\t\t\t\t\t\t\ttype="image/webp"\n\t\t\t\t\t\t\t\tsrcset="\n\t\t\t\t\t\t\t\t\t').concat(n.x2.replace(l,t)," 2x,\n\t\t\t\t\t\t\t\t\t").concat(n.x1.replace(l,t),' 1x\n\t\t\t\t\t\t\t\t"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclass="slider__image"\n\t\t\t\t\t\t\t\tsrc="').concat(n.x1,'"\n\t\t\t\t\t\t\t\tsrcset="').concat(n.x2,' 2x"\n\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\twidth="').concat(r.width,'"\n\t\t\t\t\t\t\t\theight="').concat(r.height,'"\n\t\t\t\t\t\t\t\talt="').concat(i,'"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t</li>')},createSlider=function(t){return'<div class="slider__content">\n\t\t\t\t\t\t<ul class="slider__list" style="transform: translateX(-'.concat(100*selectedSlideNumber,'%);">\n\t\t\t\t\t\t').concat(t.map(function(t,e){return createSlide(t,e)}).join(""),'\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="slider__controls">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass="slider__button slider__button--previous"\n\t\t\t\t\t\t\t\taria-label="Предыдущий слайд"\n\t\t\t\t\t\t\t\t').concat(0===selectedSlideNumber?" disabled":"",'\n\t\t\t\t\t\t\t\tdata-button-switch-slide-direction="').concat(SwitchSlideDirection.BACKWARD,'"\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass="slider__button slider__button--next"\n\t\t\t\t\t\t\t\taria-label="Следующий слайд"\n\t\t\t\t\t\t\t\t').concat(selectedSlideNumber===t.length-1?" disabled":"",'\n\t\t\t\t\t\t\t\tdata-button-switch-slide-direction="').concat(SwitchSlideDirection.FORWARD,'"\n\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>')},Slider=function(){function i(t,e){var n=this;_classCallCheck(this,i),_defineProperty(this,"_changeSlideHandler",function(t){t.preventDefault();var e=t.target.dataset.buttonSwitchSlideDirection;if(e!==SwitchSlideDirection.BACKWARD||0!==selectedSlideNumber)if(e!==SwitchSlideDirection.FORWARD||selectedSlideNumber!==n._data.length-1){var i=n._slideListElement.querySelector(".slider__item--current");switch(e){case SwitchSlideDirection.FORWARD:selectedSlideNumber++,t.target.disabled=selectedSlideNumber===n._data.length-1,t.currentTarget.querySelector('.slider__button[data-button-switch-slide-direction="'.concat(SwitchSlideDirection.BACKWARD,'"]')).disabled=!1,n._slideListElement.style.transform="translateX(-".concat(100*selectedSlideNumber,"%)"),i.classList.remove("slider__item--current"),i.nextSibling.classList.add("slider__item--current");break;case SwitchSlideDirection.BACKWARD:selectedSlideNumber--,t.target.disabled=0===selectedSlideNumber,t.currentTarget.querySelector('.slider__button[data-button-switch-slide-direction="'.concat(SwitchSlideDirection.FORWARD,'"]')).disabled=!1,n._slideListElement.style.transform="translateX(-".concat(100*selectedSlideNumber,"%)"),i.classList.remove("slider__item--current"),i.previousSibling.classList.add("slider__item--current")}}else t.target.disabled=!0;else t.target.disabled=!0}),this._element=null,this._slideListElement=null,this._data=e,this._container=t}return _createClass(i,[{key:"getTemplate",value:function(){return createSlider(this._data)}},{key:"getElement",value:function(){return this._element=this._element||createElement(this.getTemplate()),this._element}},{key:"render",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._container,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getElement();switch(2<arguments.length&&void 0!==arguments[2]?arguments[2]:RenderPosition.BEFOREEND){case RenderPosition.AFTERBEGIN:t.prepend(e);break;case RenderPosition.BEFOREEND:t.append(e)}}},{key:"setChangeSlideHandler",value:function(){this._slideListElement=this.getElement().querySelector(".slider__list"),this.getElement().querySelector(".slider__controls").addEventListener("click",this._changeSlideHandler)}}]),i}(),sliderInstance=new Slider(container,data);sliderInstance.setChangeSlideHandler(),sliderInstance.render();
"use strict";function findVideos(){document.querySelectorAll(".video").forEach(function(e){return setupVideo(e)})}function setupVideo(t){var r=t.querySelector(".video__link"),o=t.querySelector(".video__button"),i=parseURL(r);o.addEventListener("click",function(){var e=createIframe(i);r.remove(),o.remove(),t.appendChild(e)}),r.removeAttribute("href"),t.classList.add("video--enabled")}function parseURL(e){return e.href.match(/https:\/\/youtu\.be\/([a-zA-Z0-9_-]+)\/*/i)[1]}function createIframe(e){var t=document.createElement("iframe");return t.setAttribute("allowfullscreen",""),t.setAttribute("allow","autoplay"),t.setAttribute("src",generateURL(e)),t.classList.add("video__media"),t}function generateURL(e){return"https://www.youtube.com/embed/"+e+"?rel=0&showinfo=0&autoplay=1"}findVideos();
//# sourceMappingURL=script.min.js.map
